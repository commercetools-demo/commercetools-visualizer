fragment CustomFieldsTypeFragment on TypeDefinition {
    id
    key
    createdAt
    lastModifiedAt
    nameAllLocales {
        locale
        value
    }
    fieldDefinitions {
        name
        inputHint
        type {
            name
            ... on ReferenceType {
                referenceTypeId
            }
            ... on EnumType {
                values {
                    key
                    label
                }
            }
            ... on LocalizedEnumType {
                values {
                    key
                    labelAllLocales {
                        locale
                        value
                    }
                }
            }
            ... on SetType {
                elementType {
                    name
                    ... on ReferenceType {
                        referenceTypeId
                    }
                    ... on EnumType {
                        values {
                            key
                            label
                        }
                    }
                    ... on LocalizedEnumType {
                        values {
                            key
                            labelAllLocales {
                                locale
                                value
                            }
                        }
                    }
                }
            }
            ... on ReferenceType {
                referenceTypeId
            }
        }
        inputHint
        required
        labelAllLocales {
            locale
            value
        }
    }
}

fragment Adress on Address {
    id
    additionalStreetInfo
    additionalAddressInfo
    apartment
    building
    city
    company
    country
    department
    firstName
    key
    lastName
    pOBox
    postalCode
    region
    state
    salutation
    streetName
    streetNumber
    title
    phone
    mobile
    email
    fax
    custom {
        type {
            ...CustomFieldsTypeFragment
        }
        customFieldsRaw {
            name
            value
        }
    }
}

fragment TaxRateFragmentOnOrder on TaxRate {
    name
    amount
    includedInPrice
    id
    subRates {
        name
        amount
    }
}

fragment DiscountedPricePerQuantityFragment on DiscountedLineItemPriceForQuantity {
    quantity
    discountedPrice {
        value {
            type
            fractionDigits
            currencyCode
            ... on HighPrecisionMoney {
                preciseAmount
            }
            ... on Money {
                centAmount
            }
        }
        includedDiscounts {
            discountRef {
                id
                typeId
            }
            discount {
                id
                nameAllLocales {
                    locale
                    value
                }
                target {
                    type
                }
                value {
                    type
                    ... on AbsoluteDiscountValue {
                        money {
                            fractionDigits
                            centAmount
                            currencyCode
                        }
                    }
                    ... on RelativeDiscountValue {
                        type
                        permyriad
                    }
                }
            }
            discountedAmount {
                type
                currencyCode
                fractionDigits
                ... on HighPrecisionMoney {
                    preciseAmount
                }
                ... on Money {
                    centAmount
                }
            }
        }
    }
}

fragment MoneyFragment on Money {
    centAmount
    currencyCode
    fractionDigits
    type
}

query FetchCart($id: String!, $locale: Locale!) {
    cart(id: $id) {
        id
        key
        version
        customerId
        customerEmail
        version
        createdAt
        customerEmail
        customerId
        lastModifiedAt
        shippingMode
        store {
            id
            key
            createdAt
            lastModifiedAt
            nameAllLocales {
                locale
                value
            }
        }
        discountCodes {
            discountCode {
                id
                code
                cartDiscounts {
                    id
                }
            }
            state
        }
        taxedPrice {
            taxPortions {
                rate
                name
                amount {
                    ...MoneyFragment
                }
            }
            totalNet {
                ...MoneyFragment
            }
            totalGross {
                ...MoneyFragment
            }
        }
        taxedShippingPrice {
            taxPortions {
                rate
                name
                amount {
                    ...MoneyFragment
                }
            }
            totalNet {
                ...MoneyFragment
            }
            totalGross {
                ...MoneyFragment
            }
        }
        shippingInfo {
            shippingMethodName
            taxRate {
                ...TaxRateFragmentOnOrder
            }
            discountedPrice {
                value {
                    type
                    fractionDigits
                    currencyCode
                    ... on HighPrecisionMoney {
                        preciseAmount
                    }
                    ... on Money {
                        centAmount
                    }
                }
                includedDiscounts {
                    discountRef {
                        id
                        typeId
                    }
                    discount {
                        id
                        nameAllLocales {
                            locale
                            value
                        }
                        target {
                            type
                        }
                        value {
                            type
                            ... on AbsoluteDiscountValue {
                                money {
                                    fractionDigits
                                    centAmount
                                    currencyCode
                                }
                            }
                            ... on RelativeDiscountValue {
                                permyriad
                            }
                        }
                    }
                    discountedAmount {
                        type
                        fractionDigits
                        currencyCode
                        ... on HighPrecisionMoney {
                            preciseAmount
                        }
                        ... on Money {
                            centAmount
                        }
                    }
                }
            }
            taxedPrice {
                totalNet {
                    ...MoneyFragment
                }
                totalGross {
                    ...MoneyFragment
                }
            }
            price {
                ...MoneyFragment
            }
            deliveries {
                id
                createdAt
                address {
                    ...Adress
                }
                items {
                    lineItemId: id
                    quantity
                }
                parcels {
                    id
                    createdAt
                    measurements {
                        widthInMillimeter
                        heightInMillimeter
                        lengthInMillimeter
                        weightInGram
                    }
                    trackingData {
                        trackingId
                        carrier
                        provider
                        providerTransaction
                        isReturn
                    }
                    custom {
                        type {
                            ...CustomFieldsTypeFragment
                        }
                        customFieldsRaw {
                            name
                            value
                        }
                    }
                }
                custom {
                    type {
                        ...CustomFieldsTypeFragment
                    }
                    customFieldsRaw {
                        name
                        value
                    }
                }
            }
        }
        totalPrice {
            ...MoneyFragment
        }
        shipping {
            shippingKey
            shippingAddress {
                ...Adress
            }
            shippingInfo {
                shippingMethodName
                taxRate {
                    ...TaxRateFragmentOnOrder
                }
                discountedPrice {
                    value {
                        type
                        fractionDigits
                        currencyCode
                        ... on HighPrecisionMoney {
                            preciseAmount
                        }
                        ... on Money {
                            centAmount
                        }
                    }
                    includedDiscounts {
                        discountRef {
                            id
                            typeId
                        }
                        discount {
                            id
                            nameAllLocales {
                                locale
                                value
                            }
                            target {
                                type
                            }
                            value {
                                type
                                ... on AbsoluteDiscountValue {
                                    money {
                                        fractionDigits
                                        centAmount
                                        currencyCode
                                    }
                                }
                                ... on RelativeDiscountValue {
                                    permyriad
                                }
                            }
                        }
                        discountedAmount {
                            type
                            fractionDigits
                            currencyCode
                            ... on HighPrecisionMoney {
                                preciseAmount
                            }
                            ... on Money {
                                centAmount
                            }
                        }
                    }
                }
                taxedPrice {
                    totalNet {
                        ...MoneyFragment
                    }
                    totalGross {
                        ...MoneyFragment
                    }
                }
                price {
                    ...MoneyFragment
                }
                deliveries {
                    id
                    createdAt
                    address {
                        ...Adress
                    }
                    items {
                        lineItemId: id
                        quantity
                    }
                    parcels {
                        id
                        createdAt
                        measurements {
                            widthInMillimeter
                            heightInMillimeter
                            lengthInMillimeter
                            weightInGram
                        }
                        trackingData {
                            trackingId
                            carrier
                            provider
                            providerTransaction
                            isReturn
                        }
                    }
                }
            }
        }
        billingAddress {
            ...Adress
        }
        shippingAddress {
            ...Adress
        }
        totalPrice {
            currencyCode
            fractionDigits
        }
        discountOnTotalPrice {
            discountedAmount {
                type
                fractionDigits
                currencyCode
                ... on HighPrecisionMoney {
                    preciseAmount
                }
                ... on Money {
                    centAmount
                }
            }
            discountedNetAmount {
                type
                fractionDigits
                currencyCode
                ... on HighPrecisionMoney {
                    preciseAmount
                }
                ... on Money {
                    centAmount
                }
            }
            discountedGrossAmount {
                type
                fractionDigits
                currencyCode
                ... on HighPrecisionMoney {
                    preciseAmount
                }
                ... on Money {
                    centAmount
                }
            }
            includedDiscounts {
                discountRef {
                    id
                    typeId
                }
                discount {
                    id
                    nameAllLocales {
                        locale
                        value
                    }
                    target {
                        type
                    }
                    value {
                        type
                        ... on AbsoluteDiscountValue {
                            money {
                                fractionDigits
                                centAmount
                                currencyCode
                            }
                        }
                        ... on RelativeDiscountValue {
                            permyriad
                        }
                    }
                }
                discountedAmount {
                    type
                    fractionDigits
                    currencyCode
                    ... on HighPrecisionMoney {
                        preciseAmount
                    }
                    ... on Money {
                        centAmount
                    }
                }
            }
        }
        customLineItems {
            id
            quantity
            slug
            taxedPricePortions {
                shippingMethodKey
                taxedPrice {
                    totalNet {
                        ...MoneyFragment
                    }
                    totalGross {
                        ...MoneyFragment
                    }
                    totalTax {
                        ...MoneyFragment
                    }
                }
            }
            perMethodTaxRate {
                shippingMethodKey
                taxRate {
                    ...TaxRateFragmentOnOrder
                }
            }
            shippingDetails {
                targets {
                    addressKey
                    quantity
                    shippingMethodKey
                }
            }
            nameAllLocales {
                locale
                value
            }
            custom {
                type {
                    ...CustomFieldsTypeFragment
                }
                customFieldsRaw {
                    name
                    value
                }
            }
            discountedPricePerQuantity {
                ...DiscountedPricePerQuantityFragment
            }
            totalPrice {
                ...MoneyFragment
            }
            taxedPrice {
                totalNet {
                    ...MoneyFragment
                }
                totalGross {
                    ...MoneyFragment
                }
            }
            taxRate {
                ...TaxRateFragmentOnOrder
            }
            money {
                type
                fractionDigits
                currencyCode
                ... on HighPrecisionMoney {
                    preciseAmount
                }
                ... on Money {
                    centAmount
                }
            }
        }
        inventoryMode
        itemShippingAddresses {
            ...Adress
        }
        shippingKey
        shippingMode
        lineItems {
            lineItemMode
            taxedPricePortions {
                shippingMethodKey
                taxedPrice {
                    totalNet {
                        ...MoneyFragment
                    }
                    totalGross {
                        ...MoneyFragment
                    }
                    totalTax {
                        ...MoneyFragment
                    }
                }
            }
            perMethodTaxRate {
                shippingMethodKey
                taxRate {
                    ...TaxRateFragmentOnOrder
                }
            }
            shippingDetails {
                targets {
                    addressKey
                    quantity
                    shippingMethodKey
                }
            }
            id
            productId
            productSlug(locale: $locale)
            quantity
            nameAllLocales {
                locale
                value
            }
            custom {
                type {
                    ...CustomFieldsTypeFragment
                }
                customFieldsRaw {
                    name
                    value
                }
            }
            discountedPricePerQuantity {
                ...DiscountedPricePerQuantityFragment
            }
            totalPrice {
                ...MoneyFragment
            }
            variant {
                sku
                key
                images {
                    label
                    url
                    dimensions {
                        width
                        height
                    }
                }
            }
            taxRate {
                ...TaxRateFragmentOnOrder
            }
            taxedPrice {
                totalNet {
                    ...MoneyFragment
                }
                totalGross {
                    ...MoneyFragment
                }
            }
            price {
                value {
                    type
                    fractionDigits
                    currencyCode
                    ... on HighPrecisionMoney {
                        preciseAmount
                    }
                    ... on Money {
                        centAmount
                    }
                }
                discounted {
                    value {
                        type
                        fractionDigits
                        currencyCode
                        ... on HighPrecisionMoney {
                            preciseAmount
                        }
                        ... on Money {
                            centAmount
                        }
                    }
                    discount {
                        id
                        nameAllLocales {
                            locale
                            value
                        }
                        value {
                            type
                            ... on AbsoluteDiscountValue {
                                money {
                                    fractionDigits
                                    centAmount
                                    currencyCode
                                }
                            }
                            ... on RelativeDiscountValue {
                                permyriad
                            }
                        }
                    }
                }
            }
            supplyChannel {
                id
                key
            }
        }
    }
}
